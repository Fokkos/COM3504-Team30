<!-- Idea of this is to have a modal that can be placed on any page (probably the layout lol) to create a new plant sighting -->
<!-- Will just end up as a partial but for testing is on this page) -->

<main class="mt-24">
  <h1 class="text-center font-sans text-4xl"><%= title %></h1>
  <div class="container mx-auto mt-5 flex justify-center">
    <!-- TODO: Fix the hover colour -->
    <button type="button" class="bg-primary hover:bg-accent text-white font-bold py-2 px-3 rounded text-center"
            data-toggle="modal" data-target="#plantModal">
      <span class="material-symbols-outlined">
        library_add
      </span>
    </button>

    <!-- TODO Form needs following elements: -->
    <!-- Name (TEXT)-->
    <!-- Description (TEXTAREA)-->
    <!-- dateTimeSeen (datetime-local: need to work out how to account for timezone) -->
    <!-- Location (Either coordinates or use a map) -->
    <!-- Size (TEXT (num only))-->
    <!-- Image (Either by file upload or URL reference. Converted to Base64 and uploaded) -->
    <!-- In checkboxes: hasFlowers, leaves, fruits, seeds, sunExposure, flowerColor -->

    <!-- Modal -->
    <div class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center hidden" id="plantModal" tabindex="-1" role="dialog">
      <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
      <div class="modal-container bg-white w-5/6 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
        <div class="modal-content py-4 px-6">
          <div class="flex justify-between items-center mb-4">
            <h5 class="modal-title text-xl font-semibold">Create a new plant sighting</h5>
            <button class="close-modal" aria-label="Close modal" data-close>
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- ID will be autogenerated either by MongoDB or concatenating username + date -->
            <form action="/submit" method="POST">
              <div class="form-group mb-4">
                <label for="name" class="block text-text">Name</label>
                <input type="text" class="form-input mt-1 block w-full rounded border border-gray-300 pl-2" id="name" name="name" maxlength="40" required>
              </div>
              <div class="form-group mb-4">
                <label for="description" class="block text-text">Description</label>
                <textarea type="textarea" class="resize-none form-input mt-1 block w-full rounded border border-gray-300 pl-2" id="description" name="description" rows="3" maxlength="256" required></textarea>
              </div>
              <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.querySelectorAll('[data-toggle="modal"]').forEach(function (button) {
      button.addEventListener('click', function () {
        var modalId = button.getAttribute('data-target');
        document.querySelector(modalId).classList.toggle('hidden');
      });
    });

    document.querySelectorAll('[data-close]').forEach(function (button) {
      button.addEventListener('click', function () {
        var modal = button.closest('.modal');
        modal.classList.add('hidden');
      });
    });
  </script>
</main>
