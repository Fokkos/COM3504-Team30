<!-- Idea of this is to have a modal that can be placed on any page (probably the layout lol) to create a new plant sighting -->
<!-- Will just end up as a partial but for testing is on this page) -->

<main class="mt-24">
  <h1 class="text-center font-sans text-4xl"><%= title %></h1>
  <div class="container mx-auto mt-5 flex justify-center">
    <!-- TODO: Fix the hover colour -->
    <button type="button" class="bg-primary hover:bg-[--primary-hover] text-white font-bold py-2 px-3 rounded text-center"
            data-toggle="modal" data-target="#plantModal">
      <span class="material-symbols-outlined">
        library_add
      </span>
    </button>

    <!-- TODO Add Geolocation (Coords or map) & Image (Base64) -->
    <!-- TODO Fix background colour for inputs (needs a LIGHTER ver of background to work) -->

    <!-- Modal -->
    <div class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center hidden" id="plantModal" tabindex="-1" role="dialog">
      <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
      <div class="modal-container bg-background w-5/6 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
        <div class="modal-content py-4 px-6">
          <div class="flex justify-between items-center mb-4">
            <h5 class="modal-title text-xl font-semibold">Create a new plant sighting</h5>
            <button class="flex justify-center close-modal rounded border border-gray-300 bg-[--background] hover:bg-red-400" aria-label="Close modal" title="Close modal" data-close>
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- ID will be autogenerated either by MongoDB or concatenating username + date -->
            <!-- <form action="/submit" method="POST"> -->
            <form> <!-- TODO: Change to POST when ready -->
              <div class="form-group mb-4">
                <label for="name" class="block text-text">Name</label>
                <input type="text" class="form-input bg-[--background-light] text-text mt-1 block w-full rounded border border-gray-300 pl-2" id="name" name="name" maxlength="40" required>
              </div>
              <div class="form-group mb-4">
                <label for="description" class="block text-text">Description</label>
                <textarea type="textarea" class="resize-none form-input bg-[--background-light] text-text mt-1 block w-full rounded border border-gray-300 pl-2" id="description" name="description" rows="3" maxlength="256" required></textarea>
              </div>
              <div class="form-group mb-4">
                <label for="dateTimeSeen" class="block text-text">Time seen</label>
                <input type="datetime-local" id="dateTimeSeen" name="dateTimeSeen" class="form-input bg-[--background-light] text-text mt-1 block w-full rounded border border-gray-300 pl-2">
              </div>
              <div class="form-group mb-4">
                <label for="size" class="block text-text">Size (cm)</label>
                <input type="number" class="form-input bg-[--background-light] text-text mt-1 block w-full rounded border border-gray-300 pl-2" id="size" name="size" min="0" value="0" required>
              </div>
              <!-- Select -->
              <div class="form-group mb-4">
                <label for="sunExposure" class="block text-text">Sun Exposure</label>
                <select id="sunExposure" name="sunExposure" class="form-input bg-[--background-light] text-text border border-gray-300 text-sm rounded-lg focus:ring-[--background] focus:border-[--background-hover] block w-full p-2.5">
                  <option>None</option>
                  <option>Partial</option>
                  <option>Full</option>
                </select>
              </div>

              <div class="form-group mb-4">
                <label for="colour" class="block text-text">Plant Colour</label>
                <input type="color" name="colour" class="form-input p-1 h-10 w-14 block bg-[--background-light] text-text border border-gray-300 cursor-pointer rounded" id="hs-color-input" value="#2d5936" title="Select plant colour">
              </div>

              <!-- Checkboxes -->
              <!-- In checkboxes: hasFlowers, hasLeaves & sunExposure -->
              <!-- TODO change color of selected checkbox to --primary -->
              <label for="properties" class="block text-text">Properties</label>
              <div id="properties" class="form-group mb-4">
                <div class="flex items-center mb-2">
                  <input id="hasFlowers" name="hasFlowers" type="checkbox" value="" class="form-input w-4 h-4 text-primary bg-text border-text-hover rounded focus:primary-hover">
                  <label for="hasFlowers" class="ms-2 text-sm font-medium text-text">Flowers</label>
                </div>
                <div class="flex items-center mb-2">
                  <input id="hasLeaves" name="hasLeaves" type="checkbox" value="" class="form-input w-4 h-4 text-primary bg-text border-text-hover rounded focus:primary-hover">
                  <label for="hasLeaves" class="ms-2 text-sm font-medium text-text">Leaves</label>
                </div>
                <div class="flex items-center mb-2">
                  <input id="hasFruit" name="hasFruit" type="checkbox" value="" class="form-input w-4 h-4 text-primary bg-text border-text-hover rounded focus:primary-hover">
                  <label for="hasFruit" class="ms-2 text-sm font-medium text-text">Fruit</label>
                </div>
                <div class="flex items-center mb-2">
                  <input id="hasSeeds" name="hasSeeds" type="checkbox" value="" class="form-input w-4 h-4 text-primary bg-text border-text-hover rounded focus:primary-hover">
                  <label for="hasSeeds" class="ms-2 text-sm font-medium text-text">Seeds</label>
                </div>
              </div>
              <p>todo: image & geolocation</p>
              <button type="submit" class="form-input bg-primary hover:bg-[--primary-hover] text-white font-bold py-2 px-4 rounded" onclick="alert('Not implemented yet :P')">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.querySelectorAll('[data-toggle="modal"]').forEach(function (button) {
      button.addEventListener('click', function () {
        var modalId = button.getAttribute('data-target');
        document.querySelector(modalId).classList.toggle('hidden');
      });
    });

    document.querySelectorAll('[data-close]').forEach(function (button) {
      button.addEventListener('click', function () {
        var modal = button.closest('.modal');
        modal.classList.add('hidden');
      });
    });
  </script>
</main>
