<!-- Idea of this is to have a modal that can be placed on any page (probably the layout lol) to create a new plant sighting -->
<!-- Will just end up as a partial but for testing is on this page) -->

<main class="mt-24">
  <h1 class="text-center font-sans text-4xl"><%= title %></h1>
  <div class="container mx-auto mt-5 flex justify-center">
    <!-- TODO: Fix the hover colour -->
    <button
      type="button"
      class="hover-button rounded px-3 py-2 text-center font-bold"
      data-toggle="modal"
      data-target="#plantModal"
    >
      <span class="material-symbols-outlined"> library_add </span>
    </button>

    <button
      type="button"
      class="hover-button-secondary rounded px-3 py-2 text-center font-bold"
      data-toggle="modal"
      data-target="#plantModal"
    >
      <span class="material-symbols-outlined"> library_add </span>
    </button>

    <!-- TODO Form needs following elements: -->
    <!-- Name (TEXT)-->
    <!-- Description (TEXTAREA)-->
    <!-- dateTimeSeen (datetime-local: need to work out how to account for timezone) -->
    <!-- Location (Either coordinates or use a map) -->
    <!-- Size (TEXT (num only))-->
    <!-- Image (Either by file upload or URL reference. Converted to Base64 and uploaded) -->
    <!-- In checkboxes: hasFlowers, leaves, sunExposure -->
    <!-- Color picker for flowerColor -->
    <!--  fruits, seeds in a dropdown -->

    <!-- Modal -->
    <div
      class="modal fixed left-0 top-0 flex hidden h-full w-full items-center justify-center"
      id="plantModal"
      tabindex="-1"
      role="dialog"
    >
      <div
        class="modal-overlay absolute h-full w-full bg-gray-900 opacity-50"
      ></div>
      <div
        class="modal-container z-50 mx-auto w-5/6 overflow-y-auto rounded bg-background shadow-lg md:max-w-md"
      >
        <div class="modal-content px-6 py-4">
          <div class="mb-4 flex items-center justify-between">
            <h5 class="modal-title text-xl font-semibold">
              Create a new plant sighting
            </h5>
            <button
              class="close-modal flex justify-center rounded border border-gray-300"
              aria-label="Close modal"
              title="Close modal"
              data-close
            >
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- ID will be autogenerated either by MongoDB or concatenating username + date -->
            <!-- <form action="/submit" method="POST"> -->
            <form>
              <!-- TODO: Change to POST when ready -->
              <div class="form-group mb-4">
                <label for="name" class="block text-text">Name</label>
                <input
                  type="text"
                  class="form-input mt-1 block w-full rounded border border-gray-300 pl-2"
                  id="name"
                  name="name"
                  maxlength="40"
                  required
                />
              </div>
              <div class="form-group mb-4">
                <label for="description" class="block text-text"
                  >Description</label
                >
                <textarea
                  type="textarea"
                  class="form-input mt-1 block w-full resize-none rounded border border-gray-300 pl-2"
                  id="description"
                  name="description"
                  rows="3"
                  maxlength="256"
                  required
                ></textarea>
              </div>
              <div class="form-group mb-4">
                <label for="dateTimeSeen" class="block text-text"
                  >Time seen</label
                >
                <input
                  type="datetime-local"
                  id="dateTimeSeen"
                  name="dateTimeSeen"
                  class="form-input mt-1 block w-full rounded border border-gray-300 pl-2"
                />
              </div>
              <div class="form-group mb-4">
                <label for="size" class="block text-text">Size (cm)</label>
                <input
                  type="number"
                  class="form-input mt-1 block w-full rounded border border-gray-300 pl-2"
                  id="size"
                  name="size"
                  min="0"
                  value="0"
                  required
                />
              </div>
              <!-- Select -->
              <div class="form-group mb-4">
                <label for="sunExposure" class="block text-text"
                  >Sun Exposure</label
                >
                <select
                  id="sunExposure"
                  class="form-input block w-full rounded-lg border border-gray-300 bg-white p-2.5 text-sm text-text focus:border-primary focus:ring-primary"
                >
                  <option>None</option>
                  <option>Partial</option>
                  <option>Full</option>
                </select>
              </div>

              <div class="form-group mb-4">
                <label for="colour" class="block text-text">Plant Colour</label>
                <input
                  type="color"
                  class="form-input rounde block h-10 w-14 cursor-pointer border border-gray-200 bg-white p-1"
                  id="hs-color-input"
                  value="#2d5936"
                  title="Select plant colour"
                />
              </div>

              <!-- Checkboxes -->
              <!-- In checkboxes: hasFlowers, hasLeaves & sunExposure -->
              <!-- TODO change color of selected checkbox to --primary -->
              <label for="properties" class="block text-text">Properties</label>
              <div id="properties" class="form-group mb-4">
                <div class="mb-2 flex items-center">
                  <input
                    id="hasFlowers"
                    type="checkbox"
                    value=""
                    class="form-input focus:primary-hover h-4 w-4 rounded border-text-hover bg-text text-primary"
                  />
                  <label
                    for="hasFlowers"
                    class="ms-2 text-sm font-medium text-text"
                    >Flowers</label
                  >
                </div>
                <div class="mb-2 flex items-center">
                  <input
                    id="hasLeaves"
                    type="checkbox"
                    value=""
                    class="form-input focus:primary-hover h-4 w-4 rounded border-text-hover bg-text text-primary"
                  />
                  <label
                    for="hasLeaves"
                    class="ms-2 text-sm font-medium text-text"
                    >Leaves</label
                  >
                </div>
                <div class="mb-2 flex items-center">
                  <input
                    id="hasFruit"
                    type="checkbox"
                    value=""
                    class="form-input focus:primary-hover h-4 w-4 rounded border-text-hover bg-text text-primary"
                  />
                  <label
                    for="hasFruit"
                    class="ms-2 text-sm font-medium text-text"
                    >Fruit</label
                  >
                </div>
                <div class="mb-2 flex items-center">
                  <input
                    id="hasSeeds"
                    type="checkbox"
                    value=""
                    class="form-input focus:primary-hover h-4 w-4 rounded border-text-hover bg-text text-primary"
                  />
                  <label
                    for="hasSeeds"
                    class="ms-2 text-sm font-medium text-text"
                    >Seeds</label
                  >
                </div>
              </div>
              <p>todo: image & geolocation</p>
              <button
                type="submit"
                class="form-input hover-button rounded px-4 py-2"
                onclick="alert('Not implemented yet :P')"
              >
                Submit
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document
      .querySelectorAll('[data-toggle="modal"]')
      .forEach(function (button) {
        button.addEventListener('click', function () {
          var modalId = button.getAttribute('data-target');
          document.querySelector(modalId).classList.toggle('hidden');
        });
      });

    document.querySelectorAll('[data-close]').forEach(function (button) {
      button.addEventListener('click', function () {
        var modal = button.closest('.modal');
        modal.classList.add('hidden');
      });
    });
  </script>
</main>
